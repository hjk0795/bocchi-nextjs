(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{7876:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category/[category]/[restaurant]",function(){return n(5612)}])},5612:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return F},default:function(){return R}});var s=n(5893),r=n(7568),a=n(828),c=n(9815),i=n(655),l=n(6802),o=n.n(l),d=n(3299),u=n(7516),h=n(3750),m=n(6257),p=n(5503),x=n(3454);function f(){return(f=(0,r.Z)((function(){var e,t,n;return(0,i.__generator)(this,(function(s){return e={apiKey:x.env.API_KEY_FIREBASE,authDomain:"bocchi-cd32c.firebaseapp.com",databaseURL:"https://bocchi-cd32c-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"bocchi-cd32c",storageBucket:"bocchi-cd32c.appspot.com",messagingSenderId:"429017394127",appId:"1:429017394127:web:97bf9a991af175637340ba",measurementId:"G-HW15LB2E2F"},t=(0,p.ZF)(e),n=(0,m.ad)(t),[2,[t,n]]}))}))).apply(this,arguments)}var v=function(){return f.apply(this,arguments)},j=n(7294);function w(e){function t(){return(t=(0,r.Z)((function(){var t,n;return(0,i.__generator)(this,(function(s){switch(s.label){case 0:return[4,v()];case 1:return t=a.Z.apply(void 0,[s.sent(),2]),t[0],n=t[1],[4,(0,m.oe)((0,m.JU)(n,"restaurants/".concat(e.name,"/reviews"),"".concat(e.id)))];case 2:return s.sent(),alert("Deleted"),e.deleteReview(e.id),[2]}}))}))).apply(this,arguments)}function n(){return(n=(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,v()];case 1:return e=a.Z.apply(void 0,[t.sent(),2]),e[0],e[1],[2]}}))}))).apply(this,arguments)}return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{class:"row g-3",style:{paddingTop:"16px"},children:[(0,s.jsx)("div",{class:"col-3",children:(0,s.jsx)("p",{class:"card-text",children:(0,s.jsx)("div",{class:"row row-cols-1 g-3",children:(0,s.jsx)("div",{class:"col",children:(0,s.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:(0,s.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/84/84042.png",width:"100%",height:"100%",alt:"table image"})})})})})}),(0,s.jsx)("div",{class:"col",children:(0,s.jsx)("div",{class:"card shadow-sm",children:(0,s.jsxs)("div",{class:"card-body",children:[(0,s.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[(0,s.jsx)("small",{class:"text-muted",children:function(e){for(var t="",n=0;n<e;n++)t+="\u2605";return t}(e.star)}),"authenticated"===e.isAuthenticated&&e.userName===e.sessionUserName&&(0,s.jsxs)("small",{children:[(0,s.jsx)(u.Hlf,{className:o().BiEdit,style:{marginRight:"5px",cursor:"pointer"},onClick:function(){return n.apply(this,arguments)}}),(0,s.jsx)(h.yvY,{className:o().BsTrash,style:{cursor:"pointer"},onClick:function(){return t.apply(this,arguments)}})]})]}),(0,s.jsx)("p",{class:"card-text ".concat(o().cardText),children:e.statement}),(0,s.jsx)("div",{class:"d-flex justify-content-end align-items-center",children:(0,s.jsx)("small",{class:"text-muted",children:e.userName})})]})})})]})})}var g=n(130),y=n(1664),b=n.n(y),_=n(5675),N=n.n(_),Z=function(e){var t=e.src,n=e.width,s=e.quality;return"https://img.freepik.com/".concat(t,"?w=").concat(n,"&q=").concat(s||75)},k=function(e){return(0,s.jsx)(N(),{loader:Z,src:"free-vector/burger-restaurant-menu-template-with-illustrations_1361-1505.jpg?w=1480&t=st=1665436786~exp=1665437386~hmac=9049ebecc677613bebedaa1c91568398f1da22da7c6c61eea2f4b13b8f54e156",alt:"banner",width:900,height:500})},C=n(8533),E=n(9120),I=n(7577),S=n.n(I),T=n(8021);function B(e){var t=function(e){var t=e.target,n=t.name,s=t.value;A((function(e){return"reviewStar"===n?{star:Number(s),review:e.text}:{star:e.star,review:s}}))},n=function(e){B(I.filter((function(t){return t.id!==e})))},l=e.review.map((function(e,t){return{star:e.star,review:e.statement,userName:e.userName,id:e.id}})),o=(0,d.useSession)(),u=o.data,h=o.status,p=e.name,x=(0,j.useState)(e.totalCount),f=x[0],y=(x[1],(0,j.useState)(!0)),_=y[0],N=y[1],Z=(0,j.useState)(l),I=Z[0],B=Z[1],F=(0,j.useState)({star:null,review:"",userName:"",id:""}),R=F[0],A=F[1],U=(0,j.useState)(!1),L=U[0],P=U[1];function G(){return G=(0,r.Z)((function(){var e,t,n,s,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,v()];case 1:return e=a.Z.apply(void 0,[i.sent(),2]),e[0],t=e[1],n=(0,m.IO)((0,m.hJ)(t,"restaurants/".concat(p,"/reviews")),(0,m.Xo)("id"),(0,m.TQ)("".concat(I.length)),(0,m.b9)(1)),[4,(0,m.PL)(n)];case 2:return s=i.sent(),r=s.docs[0],I=(0,c.Z)(I).concat([{id:r.data().id,star:r.data().star,review:r.data().statement,userName:r.data().userName}]),B(I),N(I.length<f),[2]}}))})),G.apply(this,arguments)}var J=function(){var e=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(s){switch(s.label){case 0:return[4,v()];case 1:return t=a.Z.apply(void 0,[s.sent(),2]),t[0],n=t[1],"authenticated"!==h?[3,3]:[4,(0,m.pl)((0,m.JU)(n,"restaurants/".concat(p,"/reviews"),"".concat(I.length+1)),{id:"".concat(I.length+1),star:"".concat(e.star),statement:"".concat(e.review),userName:"".concat(u.user.name)})];case 2:return s.sent(),[3,5];case 3:return"unauthenticated"!==h?[3,5]:[4,(0,m.pl)((0,m.JU)(n,"restaurants/".concat(p,"/reviews"),"".concat(I.length+1)),{id:"".concat(I.length+1),star:"".concat(e.star),statement:"".concat(e.review),userName:"anonymous"})];case 4:s.sent(),s.label=5;case 5:return console.log("created!"),f+=1,N(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:p}),(0,s.jsxs)("main",{children:[(0,s.jsxs)("section",{class:"py-5 text-center container",children:[k(),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{children:[(0,s.jsx)(b(),{href:"https://www.freepik.com/free-vector/hot-dog-restaurant-menu-template-with-illustrations_5059593.htm#query=food%20menu&position=1&from_view=keyword",passHref:!0,children:"Image by BiZkettE1"})," ","on Freepik"]})]}),(0,s.jsx)("div",{class:"album py-5 bg-light",children:(0,s.jsxs)("div",{class:"container",children:[(0,s.jsxs)("div",{class:"row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3",children:[(0,s.jsx)("div",{class:"col",children:(0,s.jsx)("div",{class:"card shadow-sm",style:{height:"100%"},children:(0,s.jsx)("div",{class:"card-body",children:"Google map"})})}),(0,s.jsx)("div",{class:"col",children:(0,s.jsx)("div",{class:"card shadow-sm",style:{height:"100%"},children:(0,s.jsx)("div",{class:"card-body",children:(0,s.jsxs)(g.Z,{style:{filter:"invert(100%)"},children:[(0,s.jsx)(g.Z.Item,{children:(0,s.jsx)("img",{style:{filter:"invert(100%)"},className:"d-block w-100",src:"https://cdn-icons-png.flaticon.com/512/84/84042.png",alt:"First slide"})}),(0,s.jsx)(g.Z.Item,{children:(0,s.jsx)("img",{style:{filter:"invert(100%)"},className:"d-block w-100",src:"https://cdn-icons-png.flaticon.com/512/84/84042.png",alt:"Second slide"})}),(0,s.jsx)(g.Z.Item,{children:(0,s.jsx)("img",{style:{filter:"invert(100%)"},className:"d-block w-100",src:"https://cdn-icons-png.flaticon.com/512/84/84042.png",alt:"Third slide"})})]})})})})]}),(0,s.jsxs)("div",{class:"row",children:[(0,s.jsx)("div",{class:"col-3 d-flex justify-content-between align-items-center",children:(0,s.jsx)(T.Z,{name:"reviewStar",value:R.star,size:"small",style:{padding:"7px 0 0 7px"},onChange:t})}),(0,s.jsx)("div",{class:"col-9",children:(0,s.jsx)("div",{class:"mt-3",children:(0,s.jsxs)("div",{className:S().textareaContainer,children:[(0,s.jsx)("textarea",{class:"form-control",rows:L?"3":"1",name:"reviewText",placeholder:"Write a review",onChange:t,value:R.review,onClick:function(){P(!L)}}),(0,s.jsx)(E.Z,{variant:"outlined",size:"small",style:{display:L?"block":"none"},onClick:function(){return J(R)},children:"Post"})]})})})]}),(0,s.jsx)(C.Z,{dataLength:I.length,next:function(){return G.apply(this,arguments)},hasMore:_,loader:(0,s.jsx)("h4",{children:"Loading..."}),endMessage:(0,s.jsx)("p",{children:"You have seen it all"}),children:I.map((function(e,t){return(0,s.jsx)(w,{id:e.id,star:e.star,statement:e.review,userName:e.userName,isAuthenticated:h,sessionUserName:"authenticated"===h?u.user.name:"anonymous",name:p,deleteReview:n},t)}))})]})})]}),(0,s.jsx)("footer",{class:"text-muted py-5",children:(0,s.jsx)("div",{class:"container",children:(0,s.jsx)("p",{class:"float-end mb-1",children:(0,s.jsx)("a",{href:"#",children:"Back to top"})})})})]})}var F=!0;function R(e){var t=e.selectedDoc,n=e.reviewArray,r=e.totalCount;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(B,{name:t.name,review:n,totalCount:r})})}},7577:function(e){e.exports={textareaContainer:"detailCard_textareaContainer__ZRYXf"}},6802:function(e){e.exports={cardText:"review_cardText__IsbF4",BiEdit:"review_BiEdit__82AI6",BsTrash:"review_BsTrash__RlGF3"}}},function(e){e.O(0,[16,13,874,2,597,782,774,888,179],(function(){return t=7876,e(e.s=t);var t}));var t=e.O();_N_E=t}]);